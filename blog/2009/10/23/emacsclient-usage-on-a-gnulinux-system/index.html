
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Emacsclient Usage on a GNU/Linux System - draptik</title>
  <meta name="author" content="Patrick Drechsler">

  
  <meta name="description" content="Short instructions on how to setup Emacs using the Emacs Server/Emacs Client system on a GNU/Linux machine. This post is intended for people familiar &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://draptik.github.io/blog/2009/10/23/emacsclient-usage-on-a-gnulinux-system">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="draptik" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">draptik</a></h1>
  
    <h2>mostly tech stuff</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:draptik.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Emacsclient Usage on a GNU/Linux System</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-23T23:31:02+02:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Short instructions on how to setup Emacs using the Emacs Server/Emacs Client system on a GNU/Linux machine.</p>

<p>This post is intended for people familiar with GNU/Emacs.</p>

<p><strong>Requirements:</strong></p>

<p>GNU/Emacs 23 or greater (for Ubuntu get the Emacs PPA: <a href="http://https://launchpad.net/~ubuntu-elisp/+archive/ppa">https://launchpad.net/~ubuntu-elisp/+archive/ppa</a>)</p>

<p><strong>Files to edit:</strong></p>

<p><code>~/.emacs</code>
<code>~/.bashrc</code></p>

<p><strong>System settings using Gnome:</strong></p>

<p>System &ndash;> Einstellungen &ndash;> Startprogramme</p>

<p><strong>For the impatient:</strong></p>

<p>Add this to your <code>~/.bashrc</code>:</p>

<figure class='code'><figcaption><span>~/.bashrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">export </span><span class="nv">ALTERNATE_EDITOR</span><span class="o">=</span>emacs <span class="nv">EDITOR</span><span class="o">=</span>emacsclient <span class="nv">VISUAL</span><span class="o">=</span>emacsclient
</span><span class='line'><span class="c">## you can always use the command &quot;emacs&quot; instead of &quot;emacsclient -c&quot;</span>
</span><span class='line'><span class="nb">alias </span><span class="nv">emacs</span><span class="o">=</span><span class="s1">&#39;emacsclient -c&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add this to your <code>~/.emacs</code>:</p>

<figure class='code'><figcaption><span>~/.emacs</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="o">(</span>server-start<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add this to your system startup options:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>/path/to/your/emacs --daemon
</span></code></pre></td></tr></table></div></figure>


<p>ie:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>/usr/bin/emacs --daemon
</span></code></pre></td></tr></table></div></figure>


<p>Gnome panel starter:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>/usr/bin/emacsclient -c<span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Detailed instructions</strong></p>

<p>Starting Emacs from scratch will always load your init file (default: ~/.emacs). Loading this file can take a few seconds if your init file has grown over the years and if you load many external libraries.</p>

<p>To decrease the load time for situations like this the GNU/Emacs folks have developed the GNU/Emacs daemon and the GNU/Emacs server-client concept.</p>

<p>This concept allows you to attach to an already running session. No matter if you are currently using X orÂ  a TTY session!</p>

<p>Just try it (without changing any settings):</p>

<ol>
<li><p> Start GNU/Emacs from a shell under X: <code>
$ emacs
</code></p></li>
<li><p> Now start the Emacs server from within Emacs: <code>
M-x server-start
</code></p></li>
<li><p> Open a file from within Emacs (it does not have to exist): <code>
C-x C-f ~/deleteme.txt
</code></p></li>
<li><p> Because we started the Emacs server, we can now start the Emacs client with close-to-zero load time:</p></li>
<li><p> Starting the Emacs client from a new shell: <code>
$ emacsclient deleteme-from-shell.txt
</code></p></li>
</ol>


<p>This will open the file &ldquo;deleteme-from-shell.txt&rdquo; in your running Emacs session. Cool, isn&rsquo;t it?</p>

<p><strong>IMPORTANT:</strong> To close the attached Emacs client without killing the Emacs server you have to use &ldquo;C-x #&rdquo; instead of &ldquo;C-x C-c&rdquo;!</p>

<ol>
<li> Starting the Emacs client from a new shell AND opening a new Emacs frame:Same as step 5, but use &ldquo;-c&rdquo;: <code>
$ emacsclient -c deleteme-from-shell.txt
</code></li>
</ol>


<p>Again: Close the client using &ldquo;C-x #&rdquo;! This will close the frame (=window) while keeping the server running.</p>

<ol>
<li> Starting the Emacs client from a new shell AND opening it within the current shell:Same as step 5, but use &ldquo;-t&rdquo;: <code>
$ emacsclient -t deleteme-from-shell.txt
</code></li>
</ol>


<p>This will also work for a true TTY session. An example of a true TTY session can be achieved by switching to TTY-0 (Ctrl+Alt+F1; to return to your graphical display: Ctrl+Alt+F7). Try it:</p>

<p>Ctrl+Alt+F1</p>

<p>Login with username and password, then type</p>

<p><code>
$ emacsclient -t deleteme-from-shell.txt
</code></p>

<p>We are still attached to the same session! Cool!</p>

<p>Switch back to your graphical display: Ctrl+Alt+F7</p>

<ol>
<li><p> The only drawback so far is that we had to start the Emacs server manually from within an Emacs session using &ldquo;M-x server-start&rdquo;. Otherwise &ldquo;emacsclient&rdquo; will complain that it has no server to attach to. So let&rsquo;s include this feature in our Emacs init file (~/.emacs). Add this to your init file: <code>
(server-start)
</code></p></li>
<li><p> The previous step still requires us to start Emacs before we can invoke emacsclient. Let&rsquo;s tell our default shell (ie Bash) to use &ldquo;emacsclient&rdquo; as default. If that doesn&rsquo;t work, our shell should use &ldquo;emacs&rdquo;. Add the following the your ~/.bashrc: <code>
export ALTERNATE_EDITOR=emacs EDITOR=emacsclient VISUAL=emacsclient
</code></p></li>
<li><p>. I prefer to to only use a single command, &ldquo;emacs&rdquo;, and &ldquo;the computer&rdquo; should figure out
IF an Emacs server is running (then I&rsquo;ll use &ldquo;emacsclient&rdquo; to attach to a running Emacs server)</p></li>
</ol>


<p>OR if I have to start a new Emacs session (which, in turn, starts an Emacs server).</p>

<p>You can always use the command <code>emacs</code> instead of <code>emacsclient -c</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">alias </span><span class="nv">emacs</span><span class="o">=</span><span class="s1">&#39;emacsclient -c&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>. Sugar: To be sure to have an Emacs server running, we can add the Emacs daemon to our system startup options. How to add scripts to your startup options differs strongly between different Linux systems. Here&rsquo;s how I did it (using Gnome):&ldquo;System&rdquo; &ndash;> &ldquo;Einstellungen&rdquo; &ndash;> &ldquo;Startprogramme&rdquo;(in English this should correspond to something like &ldquo;System&rdquo; &ndash;> &ldquo;Settings&rdquo; &ndash;> &ldquo;Start programs&rdquo;)I added a new entry with the following content: <code>
/path/to/your/emacs --daemon
</code></li>
</ol>


<p>ie:</p>

<p><code>
/usr/bin/emacs --daemon
</code></p>

<ol>
<li>. Further sugar: To use a Gnome panel starter, just add this program parameter to the starter properties: <code>
/usr/bin/emacsclient -c
</code></li>
</ol>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">draptik</span></span>

      








  


<time datetime="2009-10-23T23:31:02+02:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>linux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2009/07/31/eclipsesubclipse-asks-for-ssh-confirmation-solved/" title="Previous Post: Eclipse3.5/Subclipse1.6.x asks for unnecessary SSH confirmation and details (solved)">&laquo; Eclipse3.5/Subclipse1.6.x asks for unnecessary SSH confirmation and details (solved)</a>
      
      
        <a class="basic-alignment right" href="/blog/2009/12/08/executing-a-script-after-mounting-a-truecrypt-partition-on-ubuntu-9-10-karmic-koala/" title="Next Post: Executing a script after mounting a TrueCrypt partition on Ubuntu 9.10 (Karmic Koala)">Executing a script after mounting a TrueCrypt partition on Ubuntu 9.10 (Karmic Koala) &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/21/link-collection-number-4/">Link Collection #4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/21/installing-seafile-on-raspberry-pi/">Installing Seafile on Raspberry Pi</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/21/installing-seafile-on-raspberry-pi/">Installing Seafile on Raspberry Pi</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/03/link-collection-number-3/">Link Collection #3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/01/node-dot-js-backend-providing-rest/">Node.js Backend Providing REST</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2009 - 2014 - Patrick Drechsler  
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'draptik';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://draptik.github.io/blog/2009/10/23/emacsclient-usage-on-a-gnulinux-system/';
        var disqus_url = 'http://draptik.github.io/blog/2009/10/23/emacsclient-usage-on-a-gnulinux-system/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
